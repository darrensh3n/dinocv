{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/darrenshen/projects/dinocv/frontend/src/hooks/useFaceLandmarker.ts"],"sourcesContent":["import { useEffect, useRef, useState, useCallback } from 'react';\nimport { FaceLandmarker, FilesetResolver, FaceLandmarkerResult } from '@mediapipe/tasks-vision';\n\nexport interface FaceDetectionState {\n  isTongueOut: boolean;\n  isReady: boolean;\n  error: string | null;\n  cameraStarted: boolean;\n}\n\nexport const useFaceLandmarker = () => {\n  const [detectionState, setDetectionState] = useState<FaceDetectionState>({\n    isTongueOut: false,\n    isReady: false,\n    error: null,\n    cameraStarted: false,\n  });\n  \n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const faceLandmarkerRef = useRef<FaceLandmarker | null>(null);\n  const animationFrameRef = useRef<number | null>(null);\n  const lastVideoTimeRef = useRef<number>(-1);\n\n  // Initialize MediaPipe Face Landmarker (but don't start camera yet)\n  useEffect(() => {\n    let mounted = true;\n\n    const initializeFaceLandmarker = async () => {\n      try {\n        const vision = await FilesetResolver.forVisionTasks(\n          'https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm'\n        );\n        \n        const faceLandmarker = await FaceLandmarker.createFromOptions(vision, {\n          baseOptions: {\n            modelAssetPath: 'https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task',\n            delegate: 'GPU',\n          },\n          runningMode: 'VIDEO',\n          numFaces: 1,\n          outputFaceBlendshapes: true,\n          outputFacialTransformationMatrixes: false,\n        });\n\n        if (mounted) {\n          faceLandmarkerRef.current = faceLandmarker;\n          setDetectionState(prev => ({ ...prev, isReady: true }));\n        }\n      } catch (err) {\n        console.error('Error initializing Face Landmarker:', err);\n        if (mounted) {\n          setDetectionState(prev => ({\n            ...prev,\n            error: 'Failed to initialize face detection',\n            isReady: false,\n          }));\n        }\n      }\n    };\n\n    initializeFaceLandmarker();\n\n    return () => {\n      mounted = false;\n      stopWebcam();\n      if (faceLandmarkerRef.current) {\n        faceLandmarkerRef.current.close();\n      }\n    };\n  }, []);\n\n  const detectFace = useCallback(() => {\n    if (!videoRef.current || !canvasRef.current) {\n      return;\n    }\n\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    if (!ctx) return;\n\n    const detect = () => {\n      // Check if video is ready and playing\n      if (!video.videoWidth || !video.videoHeight || video.paused || video.ended) {\n        animationFrameRef.current = requestAnimationFrame(detect);\n        return;\n      }\n\n      // Set canvas size to match video on first frame\n      if (canvas.width !== video.videoWidth || canvas.height !== video.videoHeight) {\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        console.log(`Canvas size set to ${canvas.width}x${canvas.height}`);\n      }\n\n      // Always draw the video frame first\n      ctx.save();\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      \n      try {\n        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n      } catch (err) {\n        console.error('Error drawing video to canvas:', err);\n      }\n      \n      ctx.restore();\n\n      // Only run face detection if MediaPipe is ready and video time has changed\n      if (faceLandmarkerRef.current && video.currentTime !== lastVideoTimeRef.current) {\n        lastVideoTimeRef.current = video.currentTime;\n        \n        try {\n          const results = faceLandmarkerRef.current.detectForVideo(video, performance.now());\n\n          if (results.faceLandmarks && results.faceLandmarks.length > 0) {\n            const landmarks = results.faceLandmarks[0];\n            \n            // Draw face landmarks\n            drawLandmarks(ctx, landmarks, canvas.width, canvas.height);\n            \n            // Detect tongue out by measuring mouth opening\n            const isTongueOut = detectTongueOut(landmarks);\n            \n            setDetectionState(prev => ({\n              ...prev,\n              isTongueOut,\n            }));\n          } else {\n            setDetectionState(prev => ({\n              ...prev,\n              isTongueOut: false,\n            }));\n          }\n        } catch (err) {\n          console.error('Face detection error:', err);\n        }\n      }\n\n      animationFrameRef.current = requestAnimationFrame(detect);\n    };\n\n    detect();\n  }, []);\n\n  const startCamera = useCallback(async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: { width: 640, height: 480 },\n        audio: false,\n      });\n\n      if (videoRef.current && canvasRef.current) {\n        videoRef.current.srcObject = stream;\n        \n        const onLoadedData = async () => {\n          try {\n            await videoRef.current?.play();\n            console.log('Video playing, starting detection...');\n            setDetectionState(prev => ({ ...prev, cameraStarted: true }));\n            detectFace();\n          } catch (playErr) {\n            console.error('Error playing video:', playErr);\n          }\n        };\n        \n        videoRef.current.addEventListener('loadeddata', onLoadedData, { once: true });\n      }\n    } catch (err) {\n      console.error('Error accessing webcam:', err);\n      setDetectionState(prev => ({\n        ...prev,\n        error: 'Failed to access webcam. Please allow camera permissions.',\n        cameraStarted: false,\n      }));\n    }\n  }, [detectFace]);\n\n  const stopWebcam = () => {\n    if (videoRef.current?.srcObject) {\n      const stream = videoRef.current.srcObject as MediaStream;\n      stream.getTracks().forEach(track => track.stop());\n    }\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n  };\n\n  const drawLandmarks = (\n    ctx: CanvasRenderingContext2D,\n    landmarks: any[],\n    width: number,\n    height: number\n  ) => {\n    // Draw mouth landmarks in red\n    ctx.fillStyle = 'red';\n    ctx.strokeStyle = 'red';\n    ctx.lineWidth = 2;\n\n    // Mouth outer contour indices\n    const mouthIndices = [61, 146, 91, 181, 84, 17, 314, 405, 321, 375, 291, 308, 324, 318, 402, 317, 14, 87, 178, 88, 95];\n    \n    // Draw mouth contour\n    ctx.beginPath();\n    mouthIndices.forEach((idx, i) => {\n      const landmark = landmarks[idx];\n      const x = landmark.x * width;\n      const y = landmark.y * height;\n      if (i === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n    });\n    ctx.closePath();\n    ctx.stroke();\n\n    // Draw key points for upper and lower lip\n    const upperLipIdx = 13;\n    const lowerLipIdx = 14;\n    \n    [upperLipIdx, lowerLipIdx].forEach(idx => {\n      const landmark = landmarks[idx];\n      ctx.beginPath();\n      ctx.arc(landmark.x * width, landmark.y * height, 5, 0, 2 * Math.PI);\n      ctx.fill();\n    });\n  };\n\n  const detectTongueOut = (landmarks: any[]): boolean => {\n    // Use upper lip (landmark 13) and lower lip (landmark 14)\n    const upperLip = landmarks[13];\n    const lowerLip = landmarks[14];\n    \n    // Calculate vertical distance between upper and lower lip\n    const mouthOpenDistance = Math.abs(lowerLip.y - upperLip.y);\n    \n    // Also check mouth width for better detection\n    const leftMouth = landmarks[61];\n    const rightMouth = landmarks[291];\n    const mouthWidth = Math.abs(rightMouth.x - leftMouth.x);\n    \n    // Normalize by mouth width to account for different face sizes\n    const normalizedDistance = mouthOpenDistance / mouthWidth;\n    \n    // Lower threshold for easier detection\n    const threshold = 0.3;\n    \n    // Debug logging\n    if (normalizedDistance > 0.2) {\n      console.log(`Mouth opening: ${normalizedDistance.toFixed(3)}, threshold: ${threshold}, detected: ${normalizedDistance > threshold}`);\n    }\n    \n    return normalizedDistance > threshold;\n  };\n\n  return {\n    videoRef,\n    canvasRef,\n    detectionState,\n    startCamera,\n  };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":["file:///Users/darrenshen/projects/dinocv/frontend/src/components/DinoGame.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState, useCallback } from 'react';\n\ninterface DinoGameProps {\n  shouldJump: boolean;\n  onRestart?: () => void;\n}\n\ninterface Obstacle {\n  x: number;\n  width: number;\n  height: number;\n}\n\nexport const DinoGame: React.FC<DinoGameProps> = ({ shouldJump }) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [gameOver, setGameOver] = useState(false);\n  const [gameStarted, setGameStarted] = useState(false);\n  const [score, setScore] = useState(0);\n  const [highScore, setHighScore] = useState(0);\n  \n  // Use ref to track current shouldJump value (avoid closure issues)\n  const shouldJumpRef = useRef(shouldJump);\n  \n  // Update ref whenever prop changes\n  useEffect(() => {\n    shouldJumpRef.current = shouldJump;\n  }, [shouldJump]);\n  \n  // Game state refs\n  const gameStateRef = useRef({\n    dino: {\n      x: 50,\n      y: 0,\n      width: 44,\n      height: 47,\n      velocityY: 0,\n      isJumping: false,\n    },\n    obstacles: [] as Obstacle[],\n    groundY: 0,\n    gameSpeed: 5,\n    score: 0,\n    frameCount: 0,\n    lastJumpState: false,\n  });\n\n  const GRAVITY = -0.6;\n  const JUMP_STRENGTH = 12;\n  const GROUND_HEIGHT = 150;\n  const OBSTACLE_SPAWN_RATE = 90;\n\n  const restart = useCallback(() => {\n    const state = gameStateRef.current;\n    state.dino.y = 0;\n    state.dino.velocityY = 0;\n    state.dino.isJumping = false;\n    state.obstacles = [];\n    state.gameSpeed = 5;\n    state.score = 0;\n    state.frameCount = 0;\n    state.lastJumpState = false;\n    setScore(0);\n    setGameOver(false);\n    setGameStarted(true);\n  }, []);\n\n  const startGame = useCallback(() => {\n    restart();\n  }, [restart]);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    const state = gameStateRef.current;\n    state.groundY = canvas.height - GROUND_HEIGHT;\n    \n    let animationFrameId: number;\n\n    const drawDino = () => {\n      const dino = state.dino;\n      const x = dino.x;\n      const y = state.groundY - dino.y - dino.height;\n      \n      // Determine leg position based on frame count for running animation\n      const legFrame = Math.floor(state.frameCount / 10) % 2;\n\n      ctx.fillStyle = '#535353';\n      \n      // Tail\n      ctx.fillRect(x, y + 25, 4, 4);\n      ctx.fillRect(x + 4, y + 21, 4, 4);\n      ctx.fillRect(x + 8, y + 21, 4, 4);\n      ctx.fillRect(x + 12, y + 25, 4, 4);\n      \n      // Body\n      ctx.fillRect(x + 12, y + 25, 16, 16);\n      \n      // Neck\n      ctx.fillRect(x + 24, y + 17, 4, 8);\n      \n      // Head\n      ctx.fillRect(x + 24, y + 9, 4, 8);\n      ctx.fillRect(x + 28, y + 9, 12, 12);\n      \n      // Eye\n      ctx.fillStyle = '#fff';\n      ctx.fillRect(x + 32, y + 13, 4, 4);\n      \n      ctx.fillStyle = '#535353';\n      \n      // Mouth\n      ctx.fillRect(x + 40, y + 13, 4, 4);\n      ctx.fillRect(x + 40, y + 17, 4, 4);\n      \n      // Arms (tiny T-Rex arms)\n      ctx.fillRect(x + 24, y + 25, 4, 8);\n      \n      // Legs - animate when not jumping\n      if (dino.y === 0 && gameStarted) {\n        // Running animation\n        if (legFrame === 0) {\n          // Left leg forward\n          ctx.fillRect(x + 12, y + 41, 4, 6);\n          // Right leg back\n          ctx.fillRect(x + 20, y + 41, 4, 6);\n        } else {\n          // Right leg forward\n          ctx.fillRect(x + 20, y + 41, 4, 6);\n          // Left leg back\n          ctx.fillRect(x + 12, y + 41, 4, 6);\n        }\n      } else {\n        // Both legs together when jumping\n        ctx.fillRect(x + 12, y + 41, 4, 6);\n        ctx.fillRect(x + 20, y + 41, 4, 6);\n      }\n    };\n\n    const drawObstacle = (obstacle: Obstacle) => {\n      const y = state.groundY - obstacle.height;\n      \n      // Draw cactus\n      ctx.fillStyle = '#535353';\n      \n      // Main body\n      const segments = Math.floor(obstacle.height / 12);\n      for (let i = 0; i < segments; i++) {\n        ctx.fillRect(obstacle.x + 4, y + (i * 12), 12, 12);\n      }\n      \n      // Arms\n      if (obstacle.height > 40) {\n        ctx.fillRect(obstacle.x, y + 12, 8, 8);\n        ctx.fillRect(obstacle.x + 16, y + 18, 8, 8);\n      }\n    };\n\n    const drawGround = () => {\n      ctx.strokeStyle = '#535353';\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      ctx.moveTo(0, state.groundY);\n      ctx.lineTo(canvas.width, state.groundY);\n      ctx.stroke();\n      \n      // Draw ground dots (moving with game speed)\n      if (gameStarted && !gameOver) {\n        for (let i = 0; i < canvas.width; i += 40) {\n          const offset = (state.frameCount * state.gameSpeed) % 40;\n          ctx.fillStyle = '#535353';\n          ctx.fillRect(i - offset, state.groundY + 4, 4, 2);\n        }\n      }\n    };\n\n    const drawClouds = () => {\n      // Simple cloud decoration\n      ctx.fillStyle = '#ddd';\n      const cloudOffset = (state.frameCount * 2) % (canvas.width + 100);\n      ctx.fillRect(canvas.width - cloudOffset, 50, 20, 8);\n      ctx.fillRect(canvas.width - cloudOffset + 8, 46, 12, 8);\n      ctx.fillRect(canvas.width - cloudOffset + 16, 50, 16, 8);\n    };\n\n    const drawScore = () => {\n      ctx.fillStyle = '#535353';\n      ctx.font = '20px \"Courier New\", monospace';\n      ctx.textAlign = 'right';\n      ctx.fillText(`HI ${highScore.toString().padStart(5, '0')} ${state.score.toString().padStart(5, '0')}`, canvas.width - 20, 30);\n    };\n\n    const drawStartScreen = () => {\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';\n      ctx.fillRect(canvas.width / 2 - 150, canvas.height / 2 - 80, 300, 120);\n      \n      ctx.strokeStyle = '#000';\n      ctx.lineWidth = 3;\n      ctx.strokeRect(canvas.width / 2 - 150, canvas.height / 2 - 80, 300, 120);\n      \n      ctx.fillStyle = '#000';\n      ctx.font = '24px \"Courier New\", monospace';\n      ctx.textAlign = 'center';\n      ctx.fillText('DinoCV', canvas.width / 2, canvas.height / 2 - 35);\n      \n      // Draw button\n      const buttonWidth = 180;\n      const buttonHeight = 50;\n      const buttonX = canvas.width / 2 - buttonWidth / 2;\n      const buttonY = canvas.height / 2 - 10;\n      \n      ctx.fillStyle = '#000';\n      ctx.fillRect(buttonX, buttonY, buttonWidth, buttonHeight);\n      \n      ctx.fillStyle = '#fff';\n      ctx.font = '20px \"Courier New\", monospace';\n      ctx.fillText('START GAME', canvas.width / 2, buttonY + 32);\n    };\n\n    const drawGameOver = () => {\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';\n      ctx.fillRect(canvas.width / 2 - 150, canvas.height / 2 - 100, 300, 160);\n      \n      ctx.strokeStyle = '#000';\n      ctx.lineWidth = 3;\n      ctx.strokeRect(canvas.width / 2 - 150, canvas.height / 2 - 100, 300, 160);\n      \n      ctx.fillStyle = '#000';\n      ctx.font = '30px \"Courier New\", monospace';\n      ctx.textAlign = 'center';\n      ctx.fillText('G A M E  O V E R', canvas.width / 2, canvas.height / 2 - 50);\n      \n      ctx.font = '18px \"Courier New\", monospace';\n      ctx.fillText(`Score: ${state.score}`, canvas.width / 2, canvas.height / 2 - 15);\n      \n      // Draw restart button\n      const buttonWidth = 150;\n      const buttonHeight = 45;\n      const buttonX = canvas.width / 2 - buttonWidth / 2;\n      const buttonY = canvas.height / 2 + 10;\n      \n      ctx.fillStyle = '#000';\n      ctx.fillRect(buttonX, buttonY, buttonWidth, buttonHeight);\n      \n      ctx.fillStyle = '#fff';\n      ctx.font = '18px \"Courier New\", monospace';\n      ctx.fillText('RESTART', canvas.width / 2, buttonY + 28);\n    };\n\n    const checkCollision = (obstacle: Obstacle): boolean => {\n      const dino = state.dino;\n      const dinoX = dino.x;\n      const dinoY = state.groundY - dino.y - dino.height;\n      const dinoWidth = dino.width;\n      const dinoHeight = dino.height;\n      \n      const obstacleY = state.groundY - obstacle.height;\n      \n      // More forgiving collision with tolerance\n      const tolerance = 8;\n      \n      return (\n        dinoX + tolerance < obstacle.x + obstacle.width &&\n        dinoX + dinoWidth - tolerance > obstacle.x &&\n        dinoY + tolerance < obstacleY + obstacle.height &&\n        dinoY + dinoHeight - tolerance > obstacleY\n      );\n    };\n\n    const jump = () => {\n      // Only allow jump if dino is on the ground\n      console.log('Jump function called:', {\n        dinoY: state.dino.y,\n        isJumping: state.dino.isJumping,\n        gameStarted,\n        gameOver,\n        canJump: state.dino.y === 0 && !state.dino.isJumping && gameStarted && !gameOver\n      });\n      \n      if (state.dino.y === 0 && !state.dino.isJumping && gameStarted && !gameOver) {\n        console.log('JUMPING NOW!');\n        state.dino.velocityY = JUMP_STRENGTH;\n        state.dino.isJumping = true;\n      }\n    };\n\n    const update = () => {\n      if (gameOver || !gameStarted) {\n        return;\n      }\n\n      state.frameCount++;\n\n      // Handle jump input from tongue detection - only trigger on rising edge\n      const currentShouldJump = shouldJumpRef.current;\n      if (currentShouldJump && !state.lastJumpState) {\n        console.log('Jump triggered by tongue detection! shouldJump:', currentShouldJump);\n        jump();\n      }\n      state.lastJumpState = currentShouldJump;\n\n      // Update dino physics - only apply gravity if not on ground\n      if (state.dino.isJumping) {\n        state.dino.velocityY += GRAVITY;\n        state.dino.y += state.dino.velocityY;\n\n        // Ground collision\n        if (state.dino.y <= 0) {\n          state.dino.y = 0;\n          state.dino.velocityY = 0;\n          state.dino.isJumping = false;\n        }\n      } else {\n        // Ensure dino stays on ground when not jumping\n        state.dino.y = 0;\n        state.dino.velocityY = 0;\n      }\n\n      // Spawn obstacles\n      if (state.frameCount % OBSTACLE_SPAWN_RATE === 0) {\n        const height = Math.random() > 0.5 ? 50 : 35;\n        state.obstacles.push({\n          x: canvas.width,\n          width: 20,\n          height: height,\n        });\n      }\n\n      // Update obstacles\n      state.obstacles = state.obstacles.filter(obstacle => {\n        obstacle.x -= state.gameSpeed;\n        \n        // Check collision\n        if (checkCollision(obstacle)) {\n          setGameOver(true);\n          if (state.score > highScore) {\n            setHighScore(state.score);\n          }\n          return true;\n        }\n        \n        // Remove off-screen obstacles and increment score\n        if (obstacle.x + obstacle.width < 0) {\n          state.score++;\n          setScore(state.score);\n          return false;\n        }\n        \n        return true;\n      });\n\n      // Increase game speed gradually\n      if (state.frameCount % 200 === 0 && state.gameSpeed < 12) {\n        state.gameSpeed += 0.5;\n      }\n    };\n\n    const render = () => {\n      // Clear canvas\n      ctx.fillStyle = '#f7f7f7';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n      // Draw game elements\n      drawClouds();\n      drawGround();\n      drawDino();\n      state.obstacles.forEach(drawObstacle);\n      \n      if (gameStarted) {\n        drawScore();\n      }\n\n      if (!gameStarted) {\n        drawStartScreen();\n      } else if (gameOver) {\n        drawGameOver();\n      }\n\n      // Update game state\n      update();\n\n      // Continue animation loop\n      animationFrameId = requestAnimationFrame(render);\n    };\n\n    // Handle keyboard input (spacebar for testing)\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.code === 'Space') {\n        e.preventDefault();\n        if (!gameStarted) {\n          startGame();\n        } else if (gameOver) {\n          restart();\n        } else {\n          jump();\n        }\n      }\n    };\n\n    // Handle canvas click for start/restart\n    const handleCanvasClick = (e: MouseEvent) => {\n      const rect = canvas.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n      \n      if (!gameStarted) {\n        // Check if click is on start button\n        const buttonWidth = 180;\n        const buttonHeight = 50;\n        const buttonX = canvas.width / 2 - buttonWidth / 2;\n        const buttonY = canvas.height / 2 - 10;\n        \n        if (\n          x >= buttonX &&\n          x <= buttonX + buttonWidth &&\n          y >= buttonY &&\n          y <= buttonY + buttonHeight\n        ) {\n          startGame();\n        }\n      } else if (gameOver) {\n        // Check if click is on restart button\n        const buttonWidth = 150;\n        const buttonHeight = 45;\n        const buttonX = canvas.width / 2 - buttonWidth / 2;\n        const buttonY = canvas.height / 2 + 10;\n        \n        if (\n          x >= buttonX &&\n          x <= buttonX + buttonWidth &&\n          y >= buttonY &&\n          y <= buttonY + buttonHeight\n        ) {\n          restart();\n        }\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    canvas.addEventListener('click', handleCanvasClick);\n\n    // Start game loop\n    render();\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      canvas.removeEventListener('click', handleCanvasClick);\n      cancelAnimationFrame(animationFrameId);\n    };\n  }, [gameOver, gameStarted, shouldJump, highScore, restart, startGame]);\n\n  return (\n    <div className=\"flex flex-col items-center justify-center h-full\">\n      <canvas\n        ref={canvasRef}\n        width={800}\n        height={400}\n        className=\"border-4 border-black bg-white cursor-pointer\"\n        style={{ imageRendering: 'pixelated' }}\n      />\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 662, "column": 0}, "map": {"version":3,"sources":["file:///Users/darrenshen/projects/dinocv/frontend/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useFaceLandmarker } from '@/hooks/useFaceLandmarker';\nimport { DinoGame } from '@/components/DinoGame';\n\nexport default function Home() {\n  const { videoRef, canvasRef, detectionState, startCamera } = useFaceLandmarker();\n  const [showPermissionModal, setShowPermissionModal] = useState(true);\n\n  const handleAllowCamera = async () => {\n    await startCamera();\n    setShowPermissionModal(false);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white flex flex-col items-center justify-center p-8\">\n      {/* Camera Permission Modal */}\n      {showPermissionModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white border-4 border-black p-8 max-w-md rounded-lg shadow-2xl\">\n            <h2 className=\"text-2xl font-bold mb-4 text-black font-mono text-center\">\n              ü¶ñ DinoCV ü¶ñ\n            </h2>\n            <p className=\"mb-6 text-black text-center\">\n              This game uses your camera to detect when you stick out your tongue to make the dinosaur jump!\n            </p>\n            <div className=\"mb-6 bg-gray-100 p-4 rounded border-2 border-gray-300\">\n              <p className=\"text-sm text-gray-700 mb-2\">\n                <strong>How to play:</strong>\n              </p>\n              <ul className=\"text-sm text-gray-700 list-disc list-inside space-y-1\">\n                <li>Allow camera access</li>\n                <li>Position your face in view</li>\n                <li>Stick out your tongue to jump</li>\n                <li>Avoid the obstacles!</li>\n              </ul>\n            </div>\n            {detectionState.error && (\n              <div className=\"mb-4 p-3 bg-red-100 border-2 border-red-500 text-red-700 text-sm rounded\">\n                {detectionState.error}\n              </div>\n            )}\n            <button\n              onClick={handleAllowCamera}\n              disabled={!detectionState.isReady}\n              className=\"w-full bg-black text-white font-bold py-3 px-6 rounded font-mono text-lg hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors\"\n            >\n              {detectionState.isReady ? 'üì∑ ALLOW CAMERA ACCESS' : '‚è≥ Loading...'}\n            </button>\n          </div>\n        </div>\n      )}\n\n      <h1 className=\"text-4xl font-bold mb-8 text-black font-mono\">\n        DINOCV\n      </h1>\n      \n      {detectionState.error && !showPermissionModal && (\n        <div className=\"mb-4 p-4 bg-red-100 border-2 border-red-500 text-red-700 rounded\">\n          {detectionState.error}\n        </div>\n      )}\n      \n      <div className=\"flex gap-8 items-start\">\n        {/* Video Feed Section */}\n        <div className=\"flex flex-col items-center\">\n          <h2 className=\"text-xl font-mono mb-4 text-black\">CAMERA FEED</h2>\n          <div className=\"relative border-4 border-black bg-gray-900\">\n            <video\n              ref={videoRef}\n              autoPlay\n              playsInline\n              muted\n              style={{ display: 'none' }}\n            />\n            <canvas\n              ref={canvasRef}\n              width={640}\n              height={480}\n              className=\"block\"\n              style={{ width: '640px', height: '480px' }}\n            />\n            {!detectionState.cameraStarted && (\n              <div className=\"absolute inset-0 flex items-center justify-center bg-gray-800\">\n                <p className=\"text-gray-300 font-mono text-sm\">üì∑ Waiting for camera...</p>\n              </div>\n            )}\n          </div>\n          \n          {/* Detection Status */}\n          <div className=\"mt-4 p-4 border-2 border-black bg-white min-w-[640px]\">\n            <div className=\"flex flex-col gap-2\">\n              <div className=\"flex items-center justify-center gap-3\">\n                <span className=\"font-mono text-sm text-black font-bold\">Status:</span>\n                {!detectionState.cameraStarted ? (\n                  <span className=\"font-mono text-sm text-gray-500\">Camera Off</span>\n                ) : (\n                  <>\n                    <div\n                      className={`w-6 h-6 rounded-full transition-colors ${\n                        detectionState.isTongueOut ? 'bg-green-500 animate-pulse' : 'bg-red-500'\n                      }`}\n                    />\n                    <span className={`font-mono text-base font-bold ${\n                      detectionState.isTongueOut ? 'text-green-600' : 'text-gray-600'\n                    }`}>\n                      {detectionState.isTongueOut ? 'üëÖ TONGUE OUT - JUMP!' : 'üòê Mouth Closed'}\n                    </span>\n                  </>\n                )}\n              </div>\n              <div className=\"text-center\">\n                <p className=\"font-mono text-xs text-gray-600\">\n                  Open your mouth or stick out your tongue to trigger jump\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Game Section */}\n        <div className=\"flex flex-col items-center\">\n          <h2 className=\"text-xl font-mono mb-4 text-black\">GAME</h2>\n          <DinoGame shouldJump={detectionState.isTongueOut} />\n          <div className=\"mt-4 p-3 border-2 border-black bg-gray-100 max-w-[800px]\">\n            <p className=\"font-mono text-xs text-black text-center\">\n              <strong>Controls:</strong> Stick out your tongue to jump | Click START to begin\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,cAAc,EAAE,WAAW,EAAE,GAAG,IAAA,wLAAiB;IAC9E,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,uOAAQ,EAAC;IAE/D,MAAM,oBAAoB;QACxB,MAAM;QACN,uBAAuB;IACzB;IAEA,qBACE,oQAAC;QAAI,WAAU;;YAEZ,qCACC,oQAAC;gBAAI,WAAU;0BACb,cAAA,oQAAC;oBAAI,WAAU;;sCACb,oQAAC;4BAAG,WAAU;sCAA2D;;;;;;sCAGzE,oQAAC;4BAAE,WAAU;sCAA8B;;;;;;sCAG3C,oQAAC;4BAAI,WAAU;;8CACb,oQAAC;oCAAE,WAAU;8CACX,cAAA,oQAAC;kDAAO;;;;;;;;;;;8CAEV,oQAAC;oCAAG,WAAU;;sDACZ,oQAAC;sDAAG;;;;;;sDACJ,oQAAC;sDAAG;;;;;;sDACJ,oQAAC;sDAAG;;;;;;sDACJ,oQAAC;sDAAG;;;;;;;;;;;;;;;;;;wBAGP,eAAe,KAAK,kBACnB,oQAAC;4BAAI,WAAU;sCACZ,eAAe,KAAK;;;;;;sCAGzB,oQAAC;4BACC,SAAS;4BACT,UAAU,CAAC,eAAe,OAAO;4BACjC,WAAU;sCAET,eAAe,OAAO,GAAG,2BAA2B;;;;;;;;;;;;;;;;;0BAM7D,oQAAC;gBAAG,WAAU;0BAA+C;;;;;;YAI5D,eAAe,KAAK,IAAI,CAAC,qCACxB,oQAAC;gBAAI,WAAU;0BACZ,eAAe,KAAK;;;;;;0BAIzB,oQAAC;gBAAI,WAAU;;kCAEb,oQAAC;wBAAI,WAAU;;0CACb,oQAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAClD,oQAAC;gCAAI,WAAU;;kDACb,oQAAC;wCACC,KAAK;wCACL,QAAQ;wCACR,WAAW;wCACX,KAAK;wCACL,OAAO;4CAAE,SAAS;wCAAO;;;;;;kDAE3B,oQAAC;wCACC,KAAK;wCACL,OAAO;wCACP,QAAQ;wCACR,WAAU;wCACV,OAAO;4CAAE,OAAO;4CAAS,QAAQ;wCAAQ;;;;;;oCAE1C,CAAC,eAAe,aAAa,kBAC5B,oQAAC;wCAAI,WAAU;kDACb,cAAA,oQAAC;4CAAE,WAAU;sDAAkC;;;;;;;;;;;;;;;;;0CAMrD,oQAAC;gCAAI,WAAU;0CACb,cAAA,oQAAC;oCAAI,WAAU;;sDACb,oQAAC;4CAAI,WAAU;;8DACb,oQAAC;oDAAK,WAAU;8DAAyC;;;;;;gDACxD,CAAC,eAAe,aAAa,iBAC5B,oQAAC;oDAAK,WAAU;8DAAkC;;;;;yEAElD;;sEACE,oQAAC;4DACC,WAAW,CAAC,uCAAuC,EACjD,eAAe,WAAW,GAAG,+BAA+B,cAC5D;;;;;;sEAEJ,oQAAC;4DAAK,WAAW,CAAC,8BAA8B,EAC9C,eAAe,WAAW,GAAG,mBAAmB,iBAChD;sEACC,eAAe,WAAW,GAAG,0BAA0B;;;;;;;;;;;;;;sDAKhE,oQAAC;4CAAI,WAAU;sDACb,cAAA,oQAAC;gDAAE,WAAU;0DAAkC;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCASvD,oQAAC;wBAAI,WAAU;;0CACb,oQAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAClD,oQAAC,4KAAQ;gCAAC,YAAY,eAAe,WAAW;;;;;;0CAChD,oQAAC;gCAAI,WAAU;0CACb,cAAA,oQAAC;oCAAE,WAAU;;sDACX,oQAAC;sDAAO;;;;;;wCAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxC"}}]
}